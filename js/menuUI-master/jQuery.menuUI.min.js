(function(a){'use strict';a.fn.menuUI=function(b,c,d){function e(){var u=a(window).height(),v=a('.nav').height()+50,w=a('.main').height()||a('.main')[0].scrollHeight;w>u?(a('html').height(Math.max(v,u,w)+10),a('body').height(Math.max(v,u,w)+10)):(a('html').height(Math.max(v,u,w)),a('body').height(Math.max(v,u,w)))}console.time('menuUI');var f={json:{brand:'Brand',menu:[{id:'home',value:'Home',icon:'glyphicon glyphicon-home'}]},defaults:{navBarHorizontal:!0,theme:{nav:'navbar navbar-default navbar-fixed-top'},action:'click',show:!0,disable:!1,debug:!1},template:{navbarHor:'<nav class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container-fluid"> <div class="navbar-header navbar-header-top"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-sidebar-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand">$brand</a> </div> </div> </nav>',navbarVer:'<div class="container-fluid"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-sidebar-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand">$brand</a> </div> <div class="collapse navbar-collapse" id="bs-sidebar-navbar-collapse-1"> <ul class="nav navbar-nav"> $menuUI </ul> </div> </div>',menuItem:'<li><a id="$id">$value<span class="pull-right hidden-xs showopacity $icon"></span></a></li>',subMenu:'<li class="dropdown"> <a id="$id" class="dropdown-toggle" data-toggle="dropdown">$value <span class="caret"></span><span  class="pull-right hidden-xs showopacity $icon"></span></a> <ul class="dropdown-menu forAnimate" role="menu"> $submenu </ul> </li>',subMenuItem:'<li><a id="$id">$value</a></li>'}},g=a.extend({},f.defaults,d),h=a.extend({},f.json,b),j=function(u,v){g.debug?console.log('debug : '+v||' : ',u):k()},k=function(){},l=function(u){return'undefined'==typeof u.show?u.show=g.show:k(),u},m=function(u){return'undefined'==typeof u.disable?u.disable=g.disable:k(),u},n=function(u){var v='',w=f.template.subMenu.replace('$id',u.id||'').replace('$value',u.value||'').replace('$icon',u.icon||'');for(var x of u.submenu){var y='';x=l(x),x=m(x),y=f.template.subMenuItem.replace('$id',x.id||'').replace('$value',x.value||''),x.disable?y=y.replace('<a','<a style="disabled" disabled="disabled" '):'',x.show?v+=y:''}return w.replace('$submenu',v||'')},o=a(this),p=f.template.navbarHor,q=f.template.navbarVer,r='';p=p.replace('$brand',h.brand||'');for(var s of h.menu){var t='';s=l(s),s=m(s),t=s.submenu&&0<s.submenu.length?n(s):f.template.menuItem.replace('$id',s.id||'').replace('$value',s.value||'').replace('$icon',s.icon||''),s.disable?t=t.replace('<a','<a style="disabled" disabled="disabled" '):'',s.show?r+=t:''}return q=q.replace('$menuUI',r||'').replace('$brand',h.brand||''),o.on(g.action,'li > a',function(){j(this,'on click'),c(this.id)}),g.navBarHorizontal?o.before(p):'',o.addClass('navbar navbar-default sidebar').attr('role','navigation'),o.append(q),j(o,'final element'),console.timeEnd('menuUI'),e(),a(window).resize(function(){e()}),a(window).scroll(function(){a('.main').height();e()}),this}})(jQuery);
